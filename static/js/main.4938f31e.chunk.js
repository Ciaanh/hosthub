(this.webpackJsonphosthub=this.webpackJsonphosthub||[]).push([[0],{17:function(e,t,n){e.exports=n(49)},22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),i=n.n(o),s=(n(22),n(23),n(2)),c=n(5),l=n(6),u=n(15),h=n(14),d=n(16),f=(n(24),n(7)),m=n.n(f),p=function(){function e(t,n,a){Object(c.a)(this,e),this.username=t,this.repo=n,this.branch=a}return Object(l.a)(e,[{key:"get",value:function(e,t){var n=(new m.a).repos(this.username,this.repo);if(-1===e.indexOf(".json"))return t("File type not supported.");n.contents(e).fetch({ref:this.branch},(function(n,a){if(n)return t(n);t(n,{name:e,sha:a.sha,content:JSON.parse(atob(a.content))})}))}},{key:"update",value:function(e,t,n,a){var r=new m.a({token:n}).repos(this.username,this.repo),o=this.branch;r.contents(e).fetch({ref:o},(function(n,i){if(n)return a(n);var s={branch:o,sha:i.sha,content:btoa(JSON.stringify(t)),message:"updated"};r.contents(e).add(s,(function(t,n){a(t,n,e)}))}))}}]),e}(),v=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={config:void 0},n.token=a.createRef(),n.db_name="sample.json",n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"saveDbFile",value:function(){new p("ciaanh","hosthub","db").update(this.state.config.path,this.state.config.data,this.token.current.value,(function(e,t,n){e||(console.log(t),console.log(n))}))}},{key:"loadDbFile",value:function(){var e=this;new p("ciaanh","hosthub","db").get(this.db_name,(function(t,n){null!==n&&void 0!==n&&""!==n||(n={description:"Config description",name:"my config",users:[]});var a=Object(s.a)({},e.state);a.config={path:e.db_name,data:n.content},e.setState(a)}))}},{key:"onChangeUserActiveState",value:function(e){var t=Object(s.a)({},this.state);t.config.data.users[e].active=!t.config.data.users[e].active,this.setState(t)}},{key:"onAddRole",value:function(e,t){if(13===e.keyCode&&""!==e.currentTarget.value){var n=Object(s.a)({},this.state);n.config.data.users[t].roles.push(e.currentTarget.value),this.setState(n),e.currentTarget.value=""}}},{key:"onAddUser",value:function(e){if(13===e.keyCode&&""!==e.currentTarget.value){var t={name:e.currentTarget.value,active:!0,roles:[]},n=Object(s.a)({},this.state);n.config.data.users.push(t),this.setState(n),e.currentTarget.value=""}}},{key:"renderFile",value:function(e){var t=this;return a.createElement(a.Fragment,null,a.createElement("h1",null,"Config name : ",e.data.name," (",e.path,")")," ",a.createElement("p",null,e.data.description),a.createElement("div",{className:"userlist"},a.createElement("span",null,"User List :"),a.createElement("br",null),a.createElement("input",{ref:this.token,className:"token",type:"text",placeholder:"Token"}),a.createElement("input",{className:"save",type:"button",value:"Save the configuration",onClick:function(){return t.saveDbFile()}}),a.createElement("ul",{className:"grid-container"},e.data.users&&e.data.users.length>0?e.data.users.map((function(e,n){var r=e.roles&&e.roles.length>0?e.roles.join(","):null;return a.createElement("li",{className:"grid-item",key:n},e.name,a.createElement("br",null),"Is active :"," ",a.createElement("input",{type:"checkbox",checked:e.active,onChange:function(){return t.onChangeUserActiveState(n)}}),a.createElement("br",null),"Roles : ",r,a.createElement("br",null),a.createElement("input",{className:"addrole",type:"text",placeholder:"Add Role",onKeyUp:function(e){return t.onAddRole(e,n)}}))})):null),a.createElement("input",{type:"text",placeholder:"Add User",onKeyUp:function(e){return t.onAddUser(e)}})))}},{key:"render",value:function(){var e=this;return a.createElement("div",null,null!==this.state.config&&void 0!==this.state.config?this.renderFile(this.state.config):a.createElement(a.Fragment,null,a.createElement("span",null,"No data to display \xaf\\_(\u30c4)_/\xaf"),a.createElement("br",null),a.createElement("input",{className:"load",type:"button",onClick:function(t){return e.loadDbFile(t)},value:"Load file"})))}}]),t}(a.Component);var b=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(v,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[17,1,2]]]);
//# sourceMappingURL=main.4938f31e.chunk.js.map